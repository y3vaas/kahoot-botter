void "use strict";(()=>%7Bvar l,w=new Uint8Array(16);function k()%7Bif(!l&&(l=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(w)%7Dfunction v(e,t=0)%7Breturn o%5Be%5Bt+0%5D%5D+o%5Be%5Bt+1%5D%5D+o%5Be%5Bt+2%5D%5D+o%5Be%5Bt+3%5D%5D+"-"+o%5Be%5Bt+4%5D%5D+o%5Be%5Bt+5%5D%5D+"-"+o%5Be%5Bt+6%5D%5D+o%5Be%5Bt+7%5D%5D+"-"+o%5Be%5Bt+8%5D%5D+o%5Be%5Bt+9%5D%5D+"-"+o%5Be%5Bt+10%5D%5D+o%5Be%5Bt+11%5D%5D+o%5Be%5Bt+12%5D%5D+o%5Be%5Bt+13%5D%5D+o%5Be%5Bt+14%5D%5D+o%5Be%5Bt+15%5D%5D%7Dvar o=%5B%5D;for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));var S=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f=%7BrandomUUID:S%7D,I=function(e,t,s)%7Bif(f.randomUUID&&!t&&!e)return f.randomUUID();e=e%7C%7C%7B%7D;let r=e.random%7C%7C(e.rng%7C%7Ck)();if(r%5B6%5D=r%5B6%5D&15%7C64,r%5B8%5D=r%5B8%5D&63%7C128,t)%7Bs=s%7C%7C0;for(let i=0;i<16;++i)t%5Bs+i%5D=r%5Bi%5D;return t%7Dreturn v(r)%7D,x=I;async function b(pin,name)%7Blet generatedUuid=x();g&&(document.cookie=%60generated-uuid=$%7BgeneratedUuid%7D%60);let reserveResponse=await fetch(%60https://kahoot.it/reserve/session/$%7Bpin%7D/?$%7BDate.now()%7D%60,g?void 0:%7Bheaders:%7Bcookie:%60generated-uuid=$%7BgeneratedUuid%7D%60%7D%7D),sessionToken=reserveResponse.headers.get("x-kahoot-session-token"),%7Bchallenge%7D=await reserveResponse.json(),challengeInput=challenge.slice(19,119),offsetCode=challenge.split("var offset = ")%5B1%5D.split(";")%5B0%5D.replace(/%5Cs/g,"");if(/%5B%5E%5Cd()*+%5D/.test(offsetCode))%7Bconsole.warn("Kahoot just attempted to run the following code on your computer:",offsetCode,%60%0ALuckily, you were protected.%60);return%7Dlet offset=eval(offsetCode),challengeResponse=challengeInput.split("").map((e,t)=>String.fromCharCode((e.charCodeAt(0)*t+offset)%2577+48)).join(""),xorResult=String.fromCharCode(...atob(sessionToken).split("").map((e,t)=>e.charCodeAt(0)%5EchallengeResponse.charCodeAt(t))),ws=new WebSocket(%60wss://kahoot.it/cometd/$%7Bpin%7D/$%7BxorResult%7D%60,g?void 0:%7Bheaders:%7Bcookie:%60generated-uuid=$%7BgeneratedUuid%7D%60%7D%7D);ws.onopen=async()=>%7Blet e=1,t=a=>%7Be++,y&&console.log("Sent",a),ws.send(JSON.stringify(a))%7D;ws.addEventListener("message",a=>%7By&&console.log("Received",JSON.parse(a.data))%7D);let s=a=>new Promise(p=>%7Blet c=n=>%7Bn=n;let d=JSON.parse(n.data);(!a%7C%7Ca(d))&&(p(d),ws.removeEventListener("message",c))%7D;ws.addEventListener("message",c)%7D);t(%5B%7Bid:e.toString(),version:"1.0",minimumVersion:"1.0",channel:"/meta/handshake",supportedConnectionTypes:%5B"websocket","long-polling","callback-polling"%5D,advice:%7Btimeout:6e4,interval:0%7D,ext:%7Back:!0,timesync:%7Btc:Date.now(),l:0,o:0%7D%7D%7D%5D);let r=await s(a=>a?.%5B0%5D?.clientId),%7BclientId:i%7D=r%5B0%5D;t(%5B%7Bid:e.toString(),channel:"/meta/connect",connectionType:"websocket",advice:%7Btimeout:0%7D,clientId:i,ext:%7Back:0,timesync:%7Btc:Date.now(),l:0,o:0%7D%7D%7D%5D),ws.addEventListener("message",async a=>%7Blet p=a.data,c=JSON.parse(p);if(c?.%5B0%5D?.channel==="/meta/connect"&&t(%5B%7Bid:e.toString(),channel:"/meta/connect",connectionType:"websocket",clientId:i,ext:%7Back:c%5B0%5D.ext.ack%7D%7D%5D),c?.%5B0%5D?.channel==="/service/player"&&c%5B0%5D.data.id===2)%7Bawait new Promise(d=>setTimeout(d,Math.floor(Math.random()*3e3)));let n=JSON.parse(c%5B0%5D.data.content);n.type==="quiz"?t(%5B%7Bid:e.toString(),channel:"/service/controller",data:%7Bgameid:pin,type:"message",host:"kahoot.it",id:45,content:JSON.stringify(%7Btype:"quiz",choice:Math.floor(Math.random()*n.numberOfChoices),questionIndex:n.gameBlockIndex%7D)%7D,clientId:i,ext:%7B%7D%7D%5D):n.type==="multiple_select_quiz"?t(%5B%7Bid:e.toString(),channel:"/service/controller",data:%7Bgameid:pin,type:"message",host:"kahoot.it",id:45,content:JSON.stringify(%7Btype:"multiple_select_quiz",choice:new Array(n.numberOfChoices).fill(0).map((d,m)=>m).filter(()=>Math.random()<.5),questionIndex:n.gameBlockIndex%7D)%7D,clientId:i,ext:%7B%7D%7D%5D):n.type==="jumble"?t(%5B%7Bid:e.toString(),channel:"/service/controller",data:%7Bgameid:pin,type:"message",host:"kahoot.it",id:45,content:JSON.stringify(%7Btype:"jumble",choice:new Array(n.numberOfChoices).fill(0).map((d,m)=>m).sort(()=>Math.random()-.5),questionIndex:n.gameBlockIndex%7D)%7D,clientId:i,ext:%7B%7D%7D%5D):n.type==="open_ended"?t(%5B%7Bid:e.toString(),channel:"/service/controller",data:%7Bgameid:pin,type:"message",host:"kahoot.it",id:45,content:JSON.stringify(%7Btype:"open_ended",text:"amogus",questionIndex:n.gameBlockIndex%7D)%7D,clientId:i,ext:%7B%7D%7D%5D):n.type==="slider"&&t(%5B%7Bid:e.toString(),channel:"/service/controller",data:%7Bgameid:pin,type:"message",host:"kahoot.it",id:45,content:JSON.stringify(%7Btype:"slider",choice:Math.floor(Math.random()*(n.maxRange-n.minRange+1)/n.step)*n.step+n.minRange,questionIndex:n.gameBlockIndex%7D)%7D,clientId:i,ext:%7B%7D%7D%5D)%7D%7D),await s();let u=e.toString();t(%5B%7Bid:u,channel:"/service/controller",data:%7Btype:"login",gameid:pin,host:"kahoot.it",name,content:JSON.stringify(%7Bdevice:%7BuserAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.3"%7D,screen:%7Bwidth:1920,height:1080%7D%7D)%7D,clientId:i,ext:%7B%7D%7D%5D),await s(a=>a?.%5B0%5D?.id===u),t(%5B%7Bid:e.toString(),channel:"/service/controller",data:%7Bgameid:pin,type:"message",host:"kahoot.it",id:16,content:JSON.stringify(%7BusingNamerator:!1%7D)%7D,clientId:i,ext:%7B%7D%7D%5D)%7D%7Dasync function C()%7Bfor(let e=0;e<h;e++)%7Blet t=Math.floor(Math.random()*1e6).toString();console.log("Joining as",t),await Promise.allSettled(%5Bb(J,t).then(()=>console.log("Joined as",t)).catch(s=>%7Bconsole.error(s)%7D),new Promise(s=>setTimeout(s,66.66666666666667))%5D)%7D%7Dvar y=!1,g="window"in globalThis,J=prompt("Game PIN:"),h=parseInt(prompt("How many bots to add?"));isNaN(h)&&(h=500,console.error("Invalid number (defaulting to 500)"));C();%7D)();%0A
